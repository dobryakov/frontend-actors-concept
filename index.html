<!doctype html>
<html lang="ru-RU">
<head>
<script type="text/javascript" src="m/underscore.js"></script>
<script type="text/javascript" src="m/jquery.js"></script>
<script type="text/javascript" src="m/backbone.js"></script>
<script type="text/javascript" src="m/backbone.marionette.js"></script>
<script type="text/javascript" src="m/backbone.wreqr.js"></script>
</head>
<body>

<script type="text/javascript">

var MyApp = Marionette.Application.extend({
  initialize: function(options) {
    console.log(options.container);
  }
});

var myApp = new MyApp({container: '#app'});

myApp.on("before:start", function(options){
  options.moreData = "Yo dawg, I heard you like options so I put some options in your options!"
});

myApp.on("start", function(options){
  if (Backbone.history){
    Backbone.history.start();
  }
});

var options = {
  something: "some value",
  another: "#some-selector",
  channelName: 'appChannel'
};

myApp.start(options);

var RootView = Marionette.LayoutView.extend({
  el: 'body'
});

myApp.rootView = new RootView();

myApp.addRegions({
  someRegion: "#some-div",
  anotherRegion: "#another-div"
});

myApp.vent.on("minutePassed", function(someData){
  console.log("Received ", someData);
});

window.setInterval(function() {
  myApp.vent.trigger("minutePassed", 'message ' + new Date());
}, 1000 * 5);

</script>

<div id="app"></div>
<div id="some-div"></div>
<div id="another-div"></div>

</body>
</html>
